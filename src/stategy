Perfect! We can start building **all those files step by step**, making them fully functional and consistent with everything weâ€™ve done so far.

Hereâ€™s a plan:

---

### **1ï¸âƒ£ Utilities & Core Libs**

* `src/lib/mailer.ts` â†’ nodemailer wrapper for sending ticket emails.
* `src/lib/utils.ts` â†’ helper functions (e.g., format price, generate ticket IDs).

### **2ï¸âƒ£ Public Components**

* `src/components/layouts/Navbar.tsx` â†’ main site navbar.
* `src/components/layouts/Footer.tsx` â†’ site footer.

### **3ï¸âƒ£ Booking Components**

* `src/components/booking/DatePicker.tsx` â†’ reusable date picker.
* `src/components/booking/SuiteCard.tsx` â†’ suite display card with gallery + price + Book Now button.

### **4ï¸âƒ£ Admin Components**

* `src/components/admin/Navbar.tsx` â†’ admin dashboard navbar.

### **5ï¸âƒ£ API Routes**

* `src/app/api/booking/route.ts` â†’ create bookings + initiate Stripe checkout.

### **6ï¸âƒ£ Pages**

* `src/app/(public)/gallery/page.tsx` â†’ gallery page.
* `src/app/(public)/success/page.tsx` â†’ booking success page.
* `src/app/(admin)/bookings/page.tsx` â†’ view all bookings.
* `src/app/(admin)/dashboard/page.tsx` â†’ admin dashboard overview.
* `src/app/(admin)/suites/page.tsx` â†’ manage suites.
* `src/app/(admin)/user/page.tsx` â†’ user management.
* `src/app/(admin)/layout.tsx` â†’ admin layout wrapper.

---

I suggest we **start with the core libs** (`mailer.ts` + `utils.ts`) first, because these will be used throughout the booking and admin functionality. Once those are solid, we can move to **components** and **pages**.

Do you want me to **generate `src/lib/mailer.ts` first**?



ğŸ“ app/api/create-booking/route.ts
ğŸ“ app/api/webhook/route.ts
ğŸ“ app/api/suites/route.ts
ğŸ“ app/api/suites/[id]/route.ts
ğŸ“ app/page.tsx â†’ landing
ğŸ“ app/suites/page.tsx â†’ list
ğŸ“ app/suites/[id]/page.tsx â†’ suite detail
ğŸ“ app/book/checkout/page.tsx â†’ redirect/loader
ğŸ“ app/ticket/[bookingRef]/page.tsx â†’ public ticket


Perfect â€” weâ€™re moving from â€œMVP booking flowâ€ to full luxury operations suite. Letâ€™s break this into modular upgrades so each piece is clear and actionable. Iâ€™ll give a step-by-step roadmap with implementation notes.

1ï¸âƒ£ QR Scanner Page for Staff

Goal: Staff scan ticket QR â†’ fetch booking â†’ mark check-in.

Steps:

Create /staff/scan page (client component) with webcam QR scanner.

Use react-qr-reader or @zxing/browser to read QR codes.

On scan â†’ fetch booking by ticket number:

const res = await fetch(`/api/bookings/${ticketNumber}/checkin`, { method: "POST" })


Display booking details (suite, guest, dates) before check-in.

Confirm â†’ mark checkedIn = true.

Bonus: Add success animation (framer-motion) for luxury effect.

2ï¸âƒ£ Prevent Early / Late Check-in by Date

Goal: Users/staff cannot check in outside allowed window.

In /api/bookings/[ref]/checkin/route.ts:

const now = new Date()
if (now < booking.checkIn || now > booking.checkOut) {
  return NextResponse.json({ error: "Check-in not allowed at this time" }, { status: 403 })
}


Staff override optional (role-based check).

Client: grey out check-in button if outside range.

3ï¸âƒ£ Admin Check-in Dashboard

Goal: Staff/admin can see todayâ€™s arrivals, pending check-ins, stats.

Page /dashboard/checkins (server component).

Query bookings:

const bookingsToday = await prisma.booking.findMany({
  where: {
    checkIn: { gte: startOfToday, lte: endOfToday },
    checkedIn: false
  }
})


Table with:

Ticket QR

Guest name/email

Suite

Check-in button

Role-based: only STAFF / ADMIN.

Extra UX: Search by ticket number or guest name.

4ï¸âƒ£ Printable PDF Ticket + Apple Wallet

Goal: Guests can save/print their ticket; Apple Wallet optional.

Generate PDF with pdf-lib or jsPDF.

Include:

Ticket number

Guest info

Suite & dates

QR code (encode ticket number)

Route: /ticket/[bookingRef]/pdf

Apple Wallet (.pkpass):

Use passkit-generator or Stripe Apple Wallet integration

Include QR + basic info

Sign and deliver via email or download

Bonus: Pre-generate ticket on webhook â†’ email to guest automatically.

5ï¸âƒ£ Dashboard Metrics (Admin)

Goal: Real-time insight: occupancy, revenue, bookings.

/dashboard/metrics page

Queries:

const totalBookings = await prisma.booking.count()
const revenueToday = await prisma.booking.aggregate({
  _sum: { paymentAmount: true },
  where: { checkIn: todayRange, paymentStatus: "PAID" }
})
const occupancy = await prisma.suite.findMany({ include: { bookings: true }})


Charts: Recharts / Chart.js / ApexCharts

KPIs:

Todayâ€™s arrivals

Checked-in vs pending

Revenue

Most booked suites

Role-based display (ADMIN / SUPER_USER only)

ğŸï¸ Next Step Recommendation

Start with QR Scanner + check-in validation. Thatâ€™s the backbone â€” all other pieces (PDF, dashboard, Apple Wallet) build on this workflow.

We can next design /staff/scan and /api/bookings/[ref]/checkin with QR + date restrictions â€” fully working flow.

Do you want me to start coding the QR scanner page + server-side check-in route next?