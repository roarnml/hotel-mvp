Alright. This dashboard is about to stop cosplaying and start paying rent.
Weâ€™re turning this into a **real operational control panel**, fully wired to your backend, Prisma, and auth. Executive summary first, then we go feature-by-feature like grown engineers.

---

## 1ï¸âƒ£ What this page *actually* represents (mental model)

This **Staff Dashboard** is a *read-optimized operational snapshot*.

Not CRUD chaos.
Not analytics bloat.
It answers one question:

> â€œWhat does hotel staff need to act on **right now**?â€

So everything here should come from **aggregated backend queries**, not raw tables.

---

## 2ï¸âƒ£ Data sources for EACH section (backend truth map)

### ğŸ”¹ Page Header

**Local Time**

* Source: server time (or client with Intl API)
* Optional: hotel timezone from settings table

Backend:

* No DB hit required
* Can be computed server-side in the page or layout

---

### ğŸ”¹ Top Metrics (the money section)

#### Arrivals Today

**Definition**
Bookings where:

* `checkIn = today`
* `status IN (CONFIRMED, PENDING_CHECKIN)`

Prisma query:

```ts
count booking
where checkIn is today
```

---

#### Departures Today

Bookings where:

* `checkOut = today`
* `status IN (CHECKED_IN)`

---

#### Occupied Rooms

Suites where:

* There exists a booking with:

  * `status = CHECKED_IN`
  * today between `checkIn` and `checkOut`

This is **not** a simple count â€” itâ€™s relational logic.

---

#### Available Rooms

Total active suites âˆ’ occupied suites

Backend logic:

* Query active suites
* Subtract occupied suite IDs

---

### ğŸ”¹ Priority Alerts (event-driven intelligence)

This section is **rule-based**, not manual.

Examples:

#### VIP Arrival

Booking where:

* `guest.isVIP = true` **(youâ€™ll add this)**
* `checkIn = today`
* `status = CONFIRMED`

---

#### Pending Cleaning Confirmation

Suite where:

* Last booking checked out
* `suite.status = DIRTY`

This implies:

* You need a `SuiteStatus` enum:

  * `AVAILABLE`
  * `OCCUPIED`
  * `DIRTY`
  * `MAINTENANCE`

---

### ğŸ”¹ Todayâ€™s Arrivals (table)

This table should come from **one optimized query**.

Fields:

* Guest name â†’ `booking.name`
* Room â†’ `suite.name` or room number
* Time â†’ `checkIn`
* Status â†’ `booking.status`

Prisma:

```ts
findMany booking
where checkIn is today
include guest + suite
order by checkIn asc
```

---

### ğŸ”¹ Quick Actions (action gateways)

These are not buttons.
They are **workflow entry points**.

---

## 3ï¸âƒ£ What must be built to make this page â€œofficialâ€

Hereâ€™s the feature backlog, cleanly scoped.

---

### âœ… Backend (must-have)

1. **Dashboard API**

   * `GET /api/staff/dashboard`
   * Returns:

     * metrics
     * alerts
     * arrivals list

2. **Booking Status Lifecycle**

   * CONFIRMED
   * CHECKED_IN
   * CHECKED_OUT
   * CANCELLED

3. **Suite Status Tracking**

   * Auto-update on check-in/check-out
   * Manual override by staff

4. **Role-guarded access**

   * Only STAFF / ADMIN / SUPER_USER
   * Already mostly done via middleware

---

### âœ… Frontend (page-level)

1. Replace hardcoded values with server data
2. Loading skeletons (no white flashes)
3. Empty states:

   * No arrivals today
   * No alerts
4. Error boundary (staff tools must not crash)

---

### âœ… Quick Actions â†’ real workflows

#### ğŸŸ¦ â€œCheck in Guestâ€

* Opens modal
* Input: bookingRef / checkInNumber
* Backend:

  * Validate booking
  * Update status
  * Mark suite OCCUPIED

---

#### ğŸŸ¦ â€œFind Bookingâ€

* Search by:

  * bookingRef
  * guest email
* Navigate to booking detail page

---

#### ğŸŸ¦ â€œView All Arrivalsâ€

* Full arrivals page
* Filters:

  * today / tomorrow
  * checked in / pending

---

## 4ï¸âƒ£ What NOT to do (important)

* Do NOT query Prisma directly in the client
* Do NOT scatter API calls per metric
* Do NOT compute business rules in React

This page should hydrate from **one server call**.
Think: *dashboard snapshot*, not *spreadsheet*.

---

## 5ï¸âƒ£ Recommended next concrete step (execution order)

1. Create `GET /api/staff/dashboard`
2. Define a typed response DTO
3. Convert this page to a **Server Component**
4. Replace static components with mapped data
5. Then wire Quick Actions one by one

Once that endpoint exists, everything else becomes mechanical.

Youâ€™re no longer â€œbuilding a pageâ€ â€”
youâ€™re defining **hotel operations as software**.
